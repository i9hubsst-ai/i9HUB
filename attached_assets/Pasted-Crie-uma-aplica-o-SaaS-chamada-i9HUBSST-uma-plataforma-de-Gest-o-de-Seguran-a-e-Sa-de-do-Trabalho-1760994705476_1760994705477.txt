Crie uma aplica√ß√£o SaaS chamada i9HUBSST ‚Äî uma plataforma de Gest√£o de Seguran√ßa e Sa√∫de do Trabalho (SST) com autentica√ß√£o multiempresa, diagn√≥stico de maturidade (IMSST) e assistente de IA integrado.

‚öôÔ∏è Stack t√©cnica

Next.js 15 + React + TypeScript

Tailwind + shadcn/ui + lucide-react

Supabase (Auth, Postgres, Storage)

Prisma ORM + Zod

PDFKit ou React-PDF (relat√≥rios)

OpenAI API / ChatGPT API para IA integrada

Execut√°vel no Replit

üîí Autentica√ß√£o e Multiempresa (Prioridade M√°xima)

Usu√°rios e pap√©is:

PlatformAdmin ‚Üí acesso total a todas as empresas; cadastra empresas e CompanyAdmins.

CompanyAdmin ‚Üí √∫nico v√≠nculo com uma empresa; gerencia membros e Employers.

Engineer ‚Üí pode estar em v√°rias empresas; aplica diagn√≥sticos e gera relat√≥rios.

Employer ‚Üí funcion√°rio vinculado a uma √∫nica empresa; acesso restrito a m√≥dulos.

Viewer ‚Üí leitura apenas; pode ter m√∫ltiplas empresas.

Regras:

PlatformAdmin cria empresa + define CompanyAdmin.

CompanyAdmin pode cadastrar Engineers, Employers e Viewers.

Employers t√™m permiss√µes por m√≥dulo (diagnostics, actions, training, etc.) controladas via tabela module_permissions.

Engineer/Viewer podem alternar empresa ativa.

RLS: todos os dados filtrados por company_id.

üß© Diagn√≥stico IMSST

M√≥dulo principal do sistema.
Funcionalidades:

Question√°rio baseado em dimens√µes de maturidade (Lideran√ßa, Processos, Conformidade, Capacita√ß√£o, Dados).

Usu√°rio Engineer ou CompanyAdmin pode:

Criar um Assessment;

Responder perguntas (Likert, m√∫ltipla escolha, sim/n√£o);

Submeter diagn√≥stico ‚Üí sistema calcula pontua√ß√£o e n√≠vel IMSST (1‚Äì5);

Gerar relat√≥rio PDF com radar e plano de a√ß√£o.

Hist√≥rico de avalia√ß√µes e compara√ß√£o de evolu√ß√£o entre per√≠odos.

IA integrada:

A IA gera automaticamente novas perguntas com base no contexto da empresa, CNAE e hist√≥rico.

A IA sugere planos de a√ß√£o personalizados ap√≥s cada diagn√≥stico, com base nos pontos fracos detectados.

üß† IA integrada (Assistentes)

Tr√™s fun√ß√µes principais:

IA Geral (menu lateral)

Atua como assistente corporativo do HUBSST.

Responde d√∫vidas, gera relat√≥rios e orienta uso da plataforma.

Conecta-se via API da OpenAI com contexto do usu√°rio logado e empresa ativa.

IA de Diagn√≥stico

Gera automaticamente perguntas para o IMSST com base em normas e hist√≥rico da empresa.

IA de Plano de A√ß√£o

Analisa resultados do diagn√≥stico e sugere a√ß√µes corretivas/preventivas com prazo, respons√°vel e categoria (NR, processo, treinamento, gest√£o).

üß± Banco de Dados (via Supabase/Prisma)

Tabelas essenciais:

users (Auth Supabase)

companies (id, name, cnpj)

memberships (user_id, company_id, role, status)

platform_admins (user_id)

module_permissions (user_id, company_id, module_key, can_read, can_write)

imsst_dimensions, imsst_questions, assessments, assessment_answers, assessment_scores

action_plans (vinculado ao diagn√≥stico)

audit_logs (registro de a√ß√µes)

Constraints:

CompanyAdmin e Employer s√≥ podem pertencer a 1 empresa.

Engineer e Viewer podem pertencer a v√°rias.

RLS ativo em todas as tabelas com company_id.

üß≠ Fluxos principais

PlatformAdmin cria empresa e designa CompanyAdmin.

CompanyAdmin gerencia membros da empresa.

Engineer aplica diagn√≥stico IMSST.

Employer responde blocos de perguntas conforme permiss√£o.

IA gera plano de a√ß√£o e relat√≥rio autom√°tico.

Viewer visualiza resultados.

üß© UI/UX

Sidebar fixa: acesso a m√≥dulos ‚Üí Dashboard, Diagn√≥sticos, A√ß√µes, Treinamentos, Administra√ß√£o.

Menu lateral direito (IA): acesso ao assistente inteligente do HUBSST.

Dashboard inicial: vis√£o geral da empresa, √∫ltimos diagn√≥sticos, a√ß√µes pendentes.

Tela de diagn√≥stico: formul√°rio por etapas, bot√£o de salvar e submeter, exibi√ß√£o de pontua√ß√£o.

Tela de relat√≥rio: radar chart, lista de a√ß√µes sugeridas, bot√£o ‚ÄúGerar PDF‚Äù.

Admin Platform: gerenciar empresas e CompanyAdmins.

Admin Company: gerenciar usu√°rios e permiss√µes.

‚ö° API e Server Actions

/api/auth/* ‚Üí registro, convites, trocas de empresa.

/api/companies ‚Üí CRUD de empresas (PlatformAdmin only).

/api/diagnostics ‚Üí criar, responder e submeter avalia√ß√µes.

/api/ai/* ‚Üí gera√ß√£o de perguntas, planos e relat√≥rios.

/api/actions ‚Üí plano de a√ß√£o e acompanhamento.

Valida√ß√£o via Zod + Role guards (requireRole, requirePlatformAdmin).

üß© Seeds

1 PlatformAdmin

2 empresas demo

1 CompanyAdmin por empresa

2 Engineers (multiempresa)

2 Employers (um por empresa, permiss√µes restritas)

1 Viewer

5 dimens√µes IMSST com 5 perguntas cada

üìà P√≥s-MVP

Comparativo de diagn√≥sticos (hist√≥rico)

Dashboard executivo consolidado

Marketplace de treinamentos e servi√ßos

Integra√ß√£o com ComplianceSST e EPIManager

üìã .env Example
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=
OPENAI_API_KEY=
NEXTAUTH_SECRET=
ENABLE_GOOGLE_SSO=true
ENABLE_PDF_EXPORT=true
ALLOW_COMPANYADMIN_ASSIGN_EMPLOYER_PERMS=true

‚úÖ Entreg√°vel esperado no Replit

Projeto Next.js funcional com:

Login e troca de empresa.

Cadastro controlado de usu√°rios (PlatformAdmin ‚Üí CompanyAdmin ‚Üí Demais).

Diagn√≥stico IMSST funcionando (criar ‚Üí responder ‚Üí submeter ‚Üí gerar relat√≥rio).

IA operante no menu lateral e nos m√≥dulos de diagn√≥stico e plano de a√ß√£o.

Banco Supabase com RLS ativo.

README com instru√ß√µes de setup local e deploy.