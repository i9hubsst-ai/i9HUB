{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Card({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        \"bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        \"@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn(\"leading-none font-semibold\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn(\"text-muted-foreground text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        \"col-start-2 row-span-2 row-start-1 self-start justify-self-end\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn(\"px-6\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn(\"flex items-center px-6 [.border-t]:pt-6\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,IAAA,uKAAG,EACvB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,IAAA,kHAAE,EAAC,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-resume.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { RadarChart, PolarGrid, PolarAngleAxis, PolarRadiusAxis, Radar, ResponsiveContainer } from 'recharts'\n\ninterface DiagnosticResumeProps {\n  assessment: any\n}\n\nexport function DiagnosticResume({ assessment }: DiagnosticResumeProps) {\n  // Mock data - ser√° substitu√≠do quando implementarmos o c√°lculo real\n  const sections = [\n    { title: 'Gov', score: 3.2, label: 'Governan√ßa e Lideran√ßa' },\n    { title: 'PGR', score: 3.5, label: 'PGR e Gerenciamento de Riscos' },\n    { title: 'CIP', score: 2.8, label: 'CIPA e Participa√ß√£o' },\n    { title: 'SES', score: 3.9, label: 'SESMT e Compet√™ncias' },\n    { title: 'Pre', score: 2.1, label: 'Prepara√ß√£o para Emerg√™ncias' },\n  ]\n\n  const radarData = sections.map(section => ({\n    section: section.title,\n    score: section.score,\n  }))\n\n  const overallScore = sections.reduce((sum, s) => sum + s.score, 0) / sections.length\n  const overallLevel = Math.ceil(overallScore)\n\n  const levelLabel = ['', 'Inicial', 'B√°sico', 'Intermedi√°rio', 'Avan√ßado', 'Otimizado'][overallLevel] || 'Intermedi√°rio'\n\n  // Contagem de achados (mock)\n  const nonCompliantCount = 2\n  const opportunityCount = 1\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Gr√°fico Radar + Score Geral */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n        <Card className=\"lg:col-span-2\">\n          <CardHeader>\n            <CardTitle>{assessment.title}</CardTitle>\n            <CardDescription>Vis√£o geral do desempenho e pontua√ß√£o de maturidade.</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <div className=\"h-[350px]\">\n              <ResponsiveContainer width=\"100%\" height=\"100%\">\n                <RadarChart data={radarData}>\n                  <PolarGrid stroke=\"#e2e8f0\" />\n                  <PolarAngleAxis \n                    dataKey=\"section\" \n                    tick={{ fill: '#64748b', fontSize: 12 }}\n                  />\n                  <PolarRadiusAxis \n                    angle={90} \n                    domain={[0, 5]} \n                    tick={{ fill: '#64748b', fontSize: 10 }}\n                  />\n                  <Radar \n                    name=\"Pontua√ß√£o\" \n                    dataKey=\"score\" \n                    stroke=\"#17a2b8\" \n                    fill=\"#17a2b8\" \n                    fillOpacity={0.5}\n                    strokeWidth={2}\n                  />\n                </RadarChart>\n              </ResponsiveContainer>\n            </div>\n          </CardContent>\n        </Card>\n\n        <div className=\"space-y-6\">\n          <Card className=\"bg-gradient-to-br from-teal-50 to-white border-teal-200\">\n            <CardContent className=\"pt-6 text-center\">\n              <div className=\"text-6xl font-bold text-teal-600 mb-2\">\n                {overallScore.toFixed(1)}\n              </div>\n              <div className=\"text-lg font-semibold text-gray-700 mb-1\">Score Geral</div>\n              <Badge className=\"bg-teal-600 text-white\">{levelLabel}</Badge>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-base flex items-center gap-2\">\n                <span className=\"text-xl\">üîç</span>\n                Resumo dos Achados\n            </CardTitle>\n            </CardHeader>\n            <CardContent>\n              <div className=\"space-y-3\">\n                <div className=\"flex items-center justify-between p-3 bg-red-50 rounded-lg border border-red-200\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-red-500 rounded-full\"></div>\n                    <span className=\"font-medium text-red-900\">N√£o Conformidades</span>\n                  </div>\n                  <Badge className=\"bg-red-600 text-white\">{nonCompliantCount}</Badge>\n                </div>\n                \n                <div className=\"flex items-center justify-between p-3 bg-yellow-50 rounded-lg border border-yellow-200\">\n                  <div className=\"flex items-center gap-2\">\n                    <div className=\"w-2 h-2 bg-yellow-500 rounded-full\"></div>\n                    <span className=\"font-medium text-yellow-900\">Oportunidades</span>\n                  </div>\n                  <Badge className=\"bg-yellow-600 text-white\">{opportunityCount}</Badge>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Progresso e Respostas */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base flex items-center gap-2\">\n            <span className=\"text-xl\">üìä</span>\n            Progresso e Respostas\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex items-center justify-between mb-2\">\n            <span className=\"text-sm text-muted-foreground\">Perguntas Respondidas</span>\n            <span className=\"font-semibold\">8 de 8</span>\n          </div>\n          <div className=\"w-full bg-gray-200 rounded-full h-3 overflow-hidden\">\n            <div \n              className=\"bg-teal-600 h-3 rounded-full transition-all\"\n              style={{ width: '100%' }}\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Scores por Se√ß√£o */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Pontua√ß√£o por Se√ß√£o</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {sections.map((section, index) => (\n              <div key={index} className=\"flex items-center gap-4\">\n                <div className=\"w-48 font-medium text-sm\">{section.label}</div>\n                <div className=\"flex-1\">\n                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                    <div \n                      className=\"bg-teal-600 h-2 rounded-full transition-all\"\n                      style={{ width: `${(section.score / 5) * 100}%` }}\n                    />\n                  </div>\n                </div>\n                <div className=\"w-16 text-right\">\n                  <span className=\"font-bold text-teal-600\">{section.score.toFixed(1)}</span>\n                  <span className=\"text-sm text-muted-foreground ml-1\">/ 5.0</span>\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 702, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60\",\n        outline:\n          \"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost:\n          \"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-9 px-4 py-2 has-[>svg]:px-3\",\n        sm: \"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5\",\n        lg: \"h-10 rounded-md px-6 has-[>svg]:px-4\",\n        icon: \"size-9\",\n        \"icon-sm\": \"size-8\",\n        \"icon-lg\": \"size-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 761, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-gray-300 bg-white px-3 py-2 text-sm ring-offset-white placeholder:text-gray-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,mNAAgB,CAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,8OAAC;QACC,WAAW,IAAA,kHAAE,EACX,6RACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 788, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        \"flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 815, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/actions/assessments.ts"],"sourcesContent":["'use server'\n\nimport { revalidatePath } from 'next/cache'\nimport { redirect } from 'next/navigation'\nimport { prisma } from '@/lib/prisma'\nimport { getCurrentUser, getUserRole, isPlatformAdmin } from '@/lib/auth'\nimport { AssessmentStatus } from '@prisma/client'\n\nexport async function createAssessment(companyId: string, formData: FormData) {\n  const user = await getCurrentUser()\n  if (!user) {\n    return { error: 'N√£o autorizado' }\n  }\n\n  const role = await getUserRole(user.id, companyId)\n  const isAdmin = await isPlatformAdmin(user.id)\n\n  if (!isAdmin && !['COMPANY_ADMIN', 'ENGINEER'].includes(role || '')) {\n    return { error: 'Sem permiss√£o para criar diagn√≥sticos' }\n  }\n\n  const title = formData.get('title') as string\n  const description = formData.get('description') as string\n  const templateId = formData.get('templateId') as string | null\n\n  if (!title) {\n    return { error: 'T√≠tulo √© obrigat√≥rio' }\n  }\n\n  try {\n    const assessment = await prisma.assessment.create({\n      data: {\n        companyId,\n        createdBy: user.id,\n        title,\n        description,\n        templateId: templateId || undefined,\n        status: 'DRAFT',\n      }\n    })\n\n    revalidatePath('/dashboard/diagnostics')\n    return { success: true, assessmentId: assessment.id }\n  } catch (error) {\n    console.error('Erro ao criar diagn√≥stico:', error)\n    return { error: 'Erro ao criar diagn√≥stico' }\n  }\n}\n\nexport async function getAssessments(companyId?: string) {\n  const user = await getCurrentUser()\n  if (!user) {\n    return { error: 'N√£o autorizado' }\n  }\n\n  try {\n    const isAdmin = await isPlatformAdmin(user.id)\n    let assessments\n\n    if (isAdmin) {\n      assessments = await prisma.assessment.findMany({\n        where: companyId ? { companyId } : undefined,\n        include: {\n          company: true,\n          scores: true,\n          _count: {\n            select: {\n              answers: true,\n              scores: true,\n            }\n          }\n        },\n        orderBy: {\n          createdAt: 'desc'\n        }\n      })\n    } else {\n      const memberships = await prisma.membership.findMany({\n        where: {\n          userId: user.id,\n          status: 'ACTIVE'\n        },\n        select: {\n          companyId: true\n        }\n      })\n\n      const companyIds = memberships.map(m => m.companyId)\n\n      if (companyId && !companyIds.includes(companyId)) {\n        return { error: 'Sem permiss√£o para acessar diagn√≥sticos desta empresa' }\n      }\n\n      assessments = await prisma.assessment.findMany({\n        where: {\n          companyId: companyId ? companyId : { in: companyIds }\n        },\n        include: {\n          company: true,\n          scores: true,\n          _count: {\n            select: {\n              answers: true,\n              scores: true,\n            }\n          }\n        },\n        orderBy: {\n          createdAt: 'desc'\n        }\n      })\n    }\n\n    return { success: true, assessments }\n  } catch (error) {\n    console.error('Erro ao buscar diagn√≥sticos:', error)\n    return { error: 'Erro ao buscar diagn√≥sticos' }\n  }\n}\n\nexport async function getAssessmentById(assessmentId: string) {\n  const user = await getCurrentUser()\n  if (!user) {\n    return { error: 'N√£o autorizado' }\n  }\n\n  try {\n    const assessment = await prisma.assessment.findUnique({\n      where: { id: assessmentId },\n      include: {\n        company: true,\n        template: {\n          include: {\n            sections: {\n              include: {\n                questions: true\n              }\n            }\n          }\n        },\n        answers: {\n          include: {\n            question: true\n          }\n        },\n        scores: true,\n        findings: true,\n        evidences: true,\n        actionPlans: true,\n      }\n    })\n\n    if (!assessment) {\n      return { error: 'Diagn√≥stico n√£o encontrado' }\n    }\n\n    const isAdmin = await isPlatformAdmin(user.id)\n    const membership = await prisma.membership.findFirst({\n      where: {\n        userId: user.id,\n        companyId: assessment.companyId,\n        status: 'ACTIVE'\n      }\n    })\n\n    if (!isAdmin && !membership) {\n      return { error: 'Sem permiss√£o para acessar este diagn√≥stico' }\n    }\n\n    return { success: true, assessment }\n  } catch (error) {\n    console.error('Erro ao buscar diagn√≥stico:', error)\n    return { error: 'Erro ao buscar diagn√≥stico' }\n  }\n}\n\nexport async function getTemplates() {\n  try {\n    const templates = await prisma.diagnosticTemplate.findMany({\n      where: {\n        status: 'PUBLISHED'\n      },\n      include: {\n        sections: {\n          include: {\n            questions: {\n              where: {\n                active: true,\n                approved: true\n              },\n              orderBy: {\n                createdAt: 'asc'\n              }\n            }\n          },\n          orderBy: {\n            order: 'asc'\n          }\n        }\n      },\n      orderBy: {\n        createdAt: 'desc'\n      }\n    })\n\n    return { success: true, templates }\n  } catch (error) {\n    console.error('Erro ao buscar templates:', error)\n    return { error: 'Erro ao buscar templates' }\n  }\n}\n\nexport async function saveAnswer(\n  assessmentId: string, \n  questionId: string, \n  value: number,\n  justification?: string,\n  evidenceUrls?: string[]\n) {\n  const user = await getCurrentUser()\n  if (!user) {\n    return { error: 'N√£o autorizado' }\n  }\n\n  try {\n    const assessment = await prisma.assessment.findUnique({\n      where: { id: assessmentId }\n    })\n\n    if (!assessment) {\n      return { error: 'Diagn√≥stico n√£o encontrado' }\n    }\n\n    const isAdmin = await isPlatformAdmin(user.id)\n    const membership = await prisma.membership.findFirst({\n      where: {\n        userId: user.id,\n        companyId: assessment.companyId,\n        status: 'ACTIVE'\n      }\n    })\n\n    if (!isAdmin && !membership) {\n      return { error: 'Sem permiss√£o para acessar este diagn√≥stico' }\n    }\n\n    if (assessment.status === 'COMPLETED') {\n      return { error: 'Este diagn√≥stico j√° foi finalizado' }\n    }\n\n    const answer = await prisma.assessmentAnswer.upsert({\n      where: {\n        assessmentId_questionId: {\n          assessmentId,\n          questionId,\n        }\n      },\n      create: {\n        assessmentId,\n        questionId,\n        userId: user.id,\n        value,\n        justification,\n        evidenceUrls: evidenceUrls || [],\n      },\n      update: {\n        value,\n        userId: user.id,\n        justification,\n        evidenceUrls: evidenceUrls || [],\n      }\n    })\n\n    if (assessment.status === 'DRAFT') {\n      await prisma.assessment.update({\n        where: { id: assessmentId },\n        data: {\n          status: 'IN_PROGRESS',\n          startedAt: new Date(),\n        }\n      })\n    }\n\n    return { success: true, answer }\n  } catch (error) {\n    console.error('Erro ao salvar resposta:', error)\n    return { error: 'Erro ao salvar resposta' }\n  }\n}\n\nexport async function submitAssessment(assessmentId: string) {\n  const user = await getCurrentUser()\n  if (!user) {\n    return { error: 'N√£o autorizado' }\n  }\n\n  try {\n    const assessment = await prisma.assessment.findUnique({\n      where: { id: assessmentId },\n      include: {\n        template: {\n          include: {\n            sections: {\n              include: {\n                questions: {\n                  where: { active: true }\n                }\n              }\n            }\n          }\n        },\n        answers: {\n          include: {\n            question: true\n          }\n        }\n      }\n    })\n\n    if (!assessment) {\n      return { error: 'Diagn√≥stico n√£o encontrado' }\n    }\n\n    if (!assessment.template) {\n      return { error: 'Este diagn√≥stico n√£o possui um template associado' }\n    }\n\n    const isAdmin = await isPlatformAdmin(user.id)\n    const membership = await prisma.membership.findFirst({\n      where: {\n        userId: user.id,\n        companyId: assessment.companyId,\n        status: 'ACTIVE'\n      }\n    })\n\n    if (!isAdmin && !membership) {\n      return { error: 'Sem permiss√£o para submeter este diagn√≥stico' }\n    }\n\n    // Calcular scores por se√ß√£o usando o novo schema\n    const totalQuestions = assessment.template.sections.reduce(\n      (sum, section) => sum + section.questions.length, \n      0\n    )\n    \n    if (assessment.answers.length < totalQuestions) {\n      return { error: `Por favor, responda todas as ${totalQuestions} perguntas antes de finalizar` }\n    }\n\n    const sectionScores: { sectionId: string; rawScore: number; weightedScore: number; level: number }[] = []\n\n    for (const section of assessment.template.sections) {\n      const sectionAnswers = assessment.answers.filter(\n        a => section.questions.some(q => q.id === a.questionId)\n      )\n\n      if (sectionAnswers.length === 0) continue\n\n      // Calcular score ponderado da se√ß√£o\n      let rawScore = 0\n      let totalWeight = 0\n\n      for (const answer of sectionAnswers) {\n        const question = section.questions.find(q => q.id === answer.questionId)\n        if (!question) continue\n\n        rawScore += answer.value * question.weight\n        totalWeight += question.weight * (question.type === 'BOOLEAN' ? 1 : 5)\n      }\n\n      const weightedScore = totalWeight > 0 ? (rawScore / totalWeight) * 100 : 0\n      const level = Math.min(5, Math.max(1, Math.ceil(weightedScore / 20)))\n\n      sectionScores.push({ sectionId: section.id, rawScore, weightedScore, level })\n\n      await prisma.assessmentScore.upsert({\n        where: {\n          assessmentId_sectionId: {\n            assessmentId,\n            sectionId: section.id,\n          }\n        },\n        create: {\n          assessmentId,\n          sectionId: section.id,\n          rawScore,\n          weightedScore,\n          level,\n        },\n        update: {\n          rawScore,\n          weightedScore,\n          level,\n        }\n      })\n    }\n\n    // Calcular overall score (m√©dia ponderada de todas as se√ß√µes)\n    const overallScore = sectionScores.length > 0 \n      ? sectionScores.reduce((sum, s) => sum + s.weightedScore, 0) / sectionScores.length \n      : 0\n    const overallLevel = Math.min(5, Math.max(1, Math.ceil(overallScore / 20)))\n\n    await prisma.assessment.update({\n      where: { id: assessmentId },\n      data: {\n        status: 'SCORED',\n        submittedAt: new Date(),\n        scoredAt: new Date(),\n        overallScore,\n        overallLevel,\n      }\n    })\n\n    // Gerar achados automaticamente baseados nas respostas n√£o conformes\n    const { generateFindings } = await import('./findings')\n    await generateFindings(assessmentId)\n\n    revalidatePath('/dashboard/diagnostics')\n    revalidatePath(`/dashboard/diagnostics/${assessmentId}`)\n    \n    return { success: true }\n  } catch (error) {\n    console.error('Erro ao submeter diagn√≥stico:', error)\n    return { error: 'Erro ao submeter diagn√≥stico' }\n  }\n}\n\nexport async function deleteAssessment(assessmentId: string) {\n  const user = await getCurrentUser()\n  if (!user) {\n    return { error: 'N√£o autorizado' }\n  }\n\n  try {\n    const assessment = await prisma.assessment.findUnique({\n      where: { id: assessmentId }\n    })\n\n    if (!assessment) {\n      return { error: 'Diagn√≥stico n√£o encontrado' }\n    }\n\n    const isAdmin = await isPlatformAdmin(user.id)\n    const role = await getUserRole(user.id, assessment.companyId)\n\n    if (!isAdmin && !['COMPANY_ADMIN', 'ENGINEER'].includes(role || '')) {\n      return { error: 'Sem permiss√£o para deletar este diagn√≥stico' }\n    }\n\n    await prisma.assessment.delete({\n      where: { id: assessmentId }\n    })\n\n    revalidatePath('/dashboard/diagnostics')\n    return { success: true }\n  } catch (error) {\n    console.error('Erro ao deletar diagn√≥stico:', error)\n    return { error: 'Erro ao deletar diagn√≥stico' }\n  }\n}\n"],"names":[],"mappings":";;;;;;;IAoNsB,aAAA,WAAA,GAAA,IAAA,+OAAA,EAAA,8CAAA,oOAAA,EAAA,KAAA,GAAA,0OAAA,EAAA","debugId":null}},
    {"offset": {"line": 827, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-sections.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Textarea } from '@/components/ui/textarea'\nimport { Label } from '@/components/ui/label'\nimport { saveAnswer } from '@/app/actions/assessments'\nimport { Check, X, AlertTriangle, Loader2, FileText } from 'lucide-react'\n\ntype QuestionType = 'BOOLEAN' | 'SCORE'\n\ninterface Question {\n  id: string\n  text: string\n  type: QuestionType\n  weight: number\n  reference: string | null\n  requiresJustification: boolean\n}\n\ninterface Section {\n  id: string\n  title: string\n  description: string | null\n  order: number\n  questions: Question[]\n}\n\ninterface Answer {\n  id: string\n  questionId: string\n  value: number\n  justification: string | null\n}\n\ninterface DiagnosticSectionsProps {\n  assessment: {\n    id: string\n    status: string\n    template: {\n      sections: Section[]\n    } | null\n    answers: Answer[]\n  }\n}\n\nexport function DiagnosticSections({ assessment }: DiagnosticSectionsProps) {\n  const [answers, setAnswers] = useState<Record<string, { value: number | null; justification: string }>>(() => {\n    const initial: Record<string, { value: number | null; justification: string }> = {}\n    assessment.answers.forEach(answer => {\n      initial[answer.questionId] = {\n        value: answer.value,\n        justification: answer.justification || ''\n      }\n    })\n    return initial\n  })\n  \n  const [saving, setSaving] = useState<string | null>(null)\n  const [errors, setErrors] = useState<Record<string, string | undefined>>({})\n\n  if (!assessment.template) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center space-y-3\">\n            <FileText className=\"h-12 w-12 text-muted-foreground mx-auto\" />\n            <h3 className=\"text-base font-semibold\">Template n√£o encontrado</h3>\n            <p className=\"text-sm text-muted-foreground\">\n              Este diagn√≥stico n√£o possui um template associado.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  const isReadOnly = assessment.status !== 'IN_PROGRESS' && assessment.status !== 'DRAFT'\n\n  const handleAnswer = async (questionId: string, value: number, requiresJustification: boolean) => {\n    const currentAnswer = answers[questionId] || { value: null, justification: '' }\n    const needsJustification = requiresJustification && (value === 0 || value <= 3)\n    \n    if (needsJustification && !currentAnswer.justification.trim()) {\n      setErrors({ ...errors, [questionId]: 'Justificativa obrigat√≥ria para esta resposta' })\n      return\n    }\n\n    const newErrors = { ...errors }\n    delete newErrors[questionId]\n    setErrors(newErrors)\n\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: { ...currentAnswer, value }\n    }))\n\n    setSaving(questionId)\n    \n    const result = await saveAnswer(\n      assessment.id,\n      questionId,\n      value,\n      currentAnswer.justification.trim() || undefined\n    )\n    \n    if ('error' in result) {\n      setErrors({ ...errors, [questionId]: result.error })\n    }\n    \n    setSaving(null)\n  }\n\n  const handleJustificationChange = (questionId: string, justification: string) => {\n    setAnswers(prev => ({\n      ...prev,\n      [questionId]: { ...prev[questionId], justification }\n    }))\n    \n    const newErrors = { ...errors }\n    delete newErrors[questionId]\n    setErrors(newErrors)\n  }\n\n  const handleJustificationSave = async (questionId: string, value: number) => {\n    const currentAnswer = answers[questionId]\n    \n    if (!currentAnswer || currentAnswer.value === null) {\n      setErrors({ ...errors, [questionId]: 'Responda a pergunta primeiro' })\n      return\n    }\n\n    setSaving(questionId)\n    \n    const result = await saveAnswer(\n      assessment.id,\n      questionId,\n      currentAnswer.value,\n      currentAnswer.justification.trim() || undefined\n    )\n    \n    if ('error' in result) {\n      setErrors({ ...errors, [questionId]: result.error })\n    }\n    \n    setSaving(null)\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {isReadOnly && (\n        <div className=\"rounded-md bg-blue-50 p-4 border border-blue-200\">\n          <div className=\"flex items-center gap-2\">\n            <AlertTriangle className=\"h-4 w-4 text-blue-600\" />\n            <p className=\"text-sm font-medium text-blue-800\">\n              Diagn√≥stico finalizado - Somente leitura\n            </p>\n          </div>\n        </div>\n      )}\n\n      {assessment.template.sections.map((section) => (\n        <Card key={section.id}>\n          <CardHeader>\n            <CardTitle className=\"text-base text-gray-900\">\n              {section.title}\n            </CardTitle>\n            {section.description && (\n              <p className=\"text-sm text-gray-600 mt-1\">{section.description}</p>\n            )}\n          </CardHeader>\n          <CardContent className=\"space-y-6\">\n            {section.questions.map((question, idx) => {\n              const answer = answers[question.id]\n              const hasAnswer = answer && answer.value !== null\n              const needsJustification = question.requiresJustification && hasAnswer && answer.value !== null && (answer.value === 0 || answer.value <= 3)\n              const hasJustification = answer?.justification && answer.justification.trim().length > 0\n              const error = errors[question.id]\n              const isSaving = saving === question.id\n\n              return (\n                <div key={question.id} className=\"border-b border-gray-200 pb-6 last:border-0 last:pb-0\">\n                  <div className=\"flex items-start gap-3\">\n                    <span className=\"text-sm font-medium text-gray-500 mt-1 min-w-[2rem]\">\n                      {idx + 1}.\n                    </span>\n                    <div className=\"flex-1 space-y-3\">\n                      <div>\n                        <p className=\"text-sm text-gray-900\">{question.text}</p>\n                        {question.reference && (\n                          <p className=\"text-xs text-gray-500 mt-1\">\n                            Refer√™ncia: {question.reference}\n                          </p>\n                        )}\n                      </div>\n\n                      <div className=\"flex flex-wrap gap-2\">\n                        {question.type === 'BOOLEAN' ? (\n                          <>\n                            <Button\n                              variant={answer?.value === 1 ? 'default' : 'outline'}\n                              size=\"sm\"\n                              onClick={() => handleAnswer(question.id, 1, question.requiresJustification)}\n                              disabled={isReadOnly || isSaving}\n                              className={answer?.value === 1 ? 'bg-green-600 hover:bg-green-700' : ''}\n                            >\n                              {isSaving && answer?.value === 1 ? (\n                                <Loader2 className=\"mr-2 h-3 w-3 animate-spin\" />\n                              ) : (\n                                <Check className=\"mr-2 h-3 w-3\" />\n                              )}\n                              Sim\n                            </Button>\n                            <Button\n                              variant={answer?.value === 0 ? 'default' : 'outline'}\n                              size=\"sm\"\n                              onClick={() => handleAnswer(question.id, 0, question.requiresJustification)}\n                              disabled={isReadOnly || isSaving}\n                              className={answer?.value === 0 ? 'bg-red-600 hover:bg-red-700' : ''}\n                            >\n                              {isSaving && answer?.value === 0 ? (\n                                <Loader2 className=\"mr-2 h-3 w-3 animate-spin\" />\n                              ) : (\n                                <X className=\"mr-2 h-3 w-3\" />\n                              )}\n                              N√£o\n                            </Button>\n                          </>\n                        ) : (\n                          <>\n                            {[1, 2, 3, 4, 5].map((score) => (\n                              <Button\n                                key={score}\n                                variant={answer?.value === score ? 'default' : 'outline'}\n                                size=\"sm\"\n                                onClick={() => handleAnswer(question.id, score, question.requiresJustification)}\n                                disabled={isReadOnly || isSaving}\n                                className={answer?.value === score ? 'bg-teal-600 hover:bg-teal-700' : ''}\n                              >\n                                {isSaving && answer?.value === score && (\n                                  <Loader2 className=\"mr-1 h-3 w-3 animate-spin\" />\n                                )}\n                                {score}\n                              </Button>\n                            ))}\n                            <span className=\"text-xs text-gray-500 self-center ml-2\">\n                              (1=Muito Baixo, 5=Excelente)\n                            </span>\n                          </>\n                        )}\n                      </div>\n\n                      {needsJustification && (\n                        <div className=\"space-y-2\">\n                          <Label htmlFor={`justification-${question.id}`} className=\"text-sm font-medium\">\n                            Justificativa obrigat√≥ria *\n                          </Label>\n                          <Textarea\n                            id={`justification-${question.id}`}\n                            value={answer.justification}\n                            onChange={(e: React.ChangeEvent<HTMLTextAreaElement>) => handleJustificationChange(question.id, e.target.value)}\n                            placeholder=\"Descreva o motivo desta resposta n√£o conforme...\"\n                            className=\"min-h-[80px] text-sm\"\n                            disabled={isReadOnly}\n                          />\n                          {!isReadOnly && hasJustification && (\n                            <Button\n                              size=\"sm\"\n                              variant=\"outline\"\n                              onClick={() => answer.value !== null && handleJustificationSave(question.id, answer.value)}\n                              disabled={isSaving}\n                            >\n                              {isSaving ? (\n                                <>\n                                  <Loader2 className=\"mr-2 h-3 w-3 animate-spin\" />\n                                  Salvando...\n                                </>\n                              ) : (\n                                <>\n                                  <Check className=\"mr-2 h-3 w-3\" />\n                                  Salvar Justificativa\n                                </>\n                              )}\n                            </Button>\n                          )}\n                        </div>\n                      )}\n\n                      {error && (\n                        <p className=\"text-xs text-red-600 flex items-center gap-1\">\n                          <AlertTriangle className=\"h-3 w-3\" />\n                          {error}\n                        </p>\n                      )}\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1319, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-findings.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { AlertTriangle, FileText, CheckCircle2, XCircle } from 'lucide-react'\n\ntype FindingSeverity = 'HIGH' | 'MEDIUM' | 'LOW'\ntype QuestionType = 'BOOLEAN' | 'SCORE'\n\ninterface Finding {\n  id: string\n  sectionTitle: string\n  questionText: string\n  questionType: QuestionType\n  value: number\n  reference: string | null\n  justification: string | null\n  severity: FindingSeverity\n  evidenceCount: number\n  createdAt: Date\n}\n\ninterface DiagnosticFindingsProps {\n  assessment: {\n    id: string\n    findings: Finding[]\n  }\n}\n\nconst severityConfig = {\n  HIGH: {\n    label: 'Alta',\n    className: 'bg-red-100 text-red-800 border-red-200',\n    icon: XCircle,\n    iconColor: 'text-red-600'\n  },\n  MEDIUM: {\n    label: 'M√©dia',\n    className: 'bg-orange-100 text-orange-800 border-orange-200',\n    icon: AlertTriangle,\n    iconColor: 'text-orange-600'\n  },\n  LOW: {\n    label: 'Baixa',\n    className: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n    icon: AlertTriangle,\n    iconColor: 'text-yellow-600'\n  }\n}\n\nexport function DiagnosticFindings({ assessment }: DiagnosticFindingsProps) {\n  const findings = assessment.findings || []\n\n  const findingsBySection = findings.reduce((acc, finding) => {\n    if (!acc[finding.sectionTitle]) {\n      acc[finding.sectionTitle] = []\n    }\n    acc[finding.sectionTitle].push(finding)\n    return acc\n  }, {} as Record<string, Finding[]>)\n\n  const stats = {\n    high: findings.filter(f => f.severity === 'HIGH').length,\n    medium: findings.filter(f => f.severity === 'MEDIUM').length,\n    low: findings.filter(f => f.severity === 'LOW').length,\n    total: findings.length\n  }\n\n  if (findings.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center space-y-3\">\n            <CheckCircle2 className=\"h-12 w-12 text-green-600 mx-auto\" />\n            <h3 className=\"text-base font-semibold text-gray-900\">\n              Nenhum achado identificado\n            </h3>\n            <p className=\"text-sm text-muted-foreground max-w-md mx-auto\">\n              Todas as respostas est√£o conformes. O diagn√≥stico n√£o identificou n√£o conformidades.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Resumo de Achados</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-gray-900\">{stats.total}</div>\n              <div className=\"text-xs text-gray-600\">Total</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-red-600\">{stats.high}</div>\n              <div className=\"text-xs text-gray-600\">Alta</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-orange-600\">{stats.medium}</div>\n              <div className=\"text-xs text-gray-600\">M√©dia</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-yellow-600\">{stats.low}</div>\n              <div className=\"text-xs text-gray-600\">Baixa</div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {Object.entries(findingsBySection).map(([sectionTitle, sectionFindings]) => (\n        <Card key={sectionTitle}>\n          <CardHeader>\n            <CardTitle className=\"text-base text-gray-900\">\n              {sectionTitle}\n              <span className=\"ml-2 text-sm font-normal text-gray-500\">\n                ({sectionFindings.length} {sectionFindings.length === 1 ? 'achado' : 'achados'})\n              </span>\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-4\">\n            {sectionFindings.map((finding) => {\n              const config = severityConfig[finding.severity]\n              const Icon = config.icon\n              \n              return (\n                <div\n                  key={finding.id}\n                  className={`rounded-md border p-4 ${config.className}`}\n                >\n                  <div className=\"flex items-start gap-3\">\n                    <Icon className={`h-5 w-5 mt-0.5 ${config.iconColor}`} />\n                    <div className=\"flex-1 space-y-2\">\n                      <div className=\"flex items-start justify-between gap-2\">\n                        <p className=\"text-sm font-medium text-gray-900\">\n                          {finding.questionText}\n                        </p>\n                        <Badge variant=\"outline\" className=\"text-xs whitespace-nowrap\">\n                          Severidade: {config.label}\n                        </Badge>\n                      </div>\n\n                      <div className=\"space-y-1 text-xs text-gray-700\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"font-medium\">Resposta:</span>\n                          {finding.questionType === 'BOOLEAN' ? (\n                            <span className=\"font-semibold text-red-700\">\n                              N√£o\n                            </span>\n                          ) : (\n                            <span className=\"font-semibold text-red-700\">\n                              {finding.value}/5\n                            </span>\n                          )}\n                        </div>\n\n                        {finding.reference && (\n                          <div className=\"flex items-start gap-2\">\n                            <span className=\"font-medium\">Refer√™ncia:</span>\n                            <span>{finding.reference}</span>\n                          </div>\n                        )}\n\n                        {finding.justification && (\n                          <div className=\"flex items-start gap-2 mt-2\">\n                            <span className=\"font-medium\">Justificativa:</span>\n                            <span className=\"italic\">{finding.justification}</span>\n                          </div>\n                        )}\n\n                        {finding.evidenceCount > 0 && (\n                          <div className=\"flex items-center gap-2 mt-2\">\n                            <FileText className=\"h-3 w-3\" />\n                            <span>{finding.evidenceCount} evid√™ncia(s) anexada(s)</span>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )\n            })}\n          </CardContent>\n        </Card>\n      ))}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1797, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-action-plan.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Badge } from '@/components/ui/badge'\nimport { Sparkles, Loader2, Save, CheckCircle2, AlertCircle } from 'lucide-react'\n\ninterface DiagnosticActionPlanProps {\n  assessment: {\n    id: string\n    status: string\n    findings: Array<{ id: string }>\n  }\n}\n\ninterface ActionPlanItem {\n  title: string\n  description: string\n  priority: 'HIGH' | 'MEDIUM' | 'LOW'\n  estimatedDays: number\n  reference: string | null\n}\n\ninterface AIReport {\n  executiveSummary: string\n  actionPlan: ActionPlanItem[]\n  metadata: {\n    assessmentId: string\n    companyName: string\n    overallScore: number | null\n    overallLevel: number | null\n    findingsCount: number\n    generatedAt: string\n  }\n}\n\nconst priorityConfig = {\n  HIGH: {\n    label: 'Alta',\n    className: 'bg-red-100 text-red-800 border-red-200',\n  },\n  MEDIUM: {\n    label: 'M√©dia',\n    className: 'bg-orange-100 text-orange-800 border-orange-200',\n  },\n  LOW: {\n    label: 'Baixa',\n    className: 'bg-yellow-100 text-yellow-800 border-yellow-200',\n  }\n}\n\nexport function DiagnosticActionPlan({ assessment }: DiagnosticActionPlanProps) {\n  const [generating, setGenerating] = useState(false)\n  const [saving, setSaving] = useState(false)\n  const [loading, setLoading] = useState(true)\n  const [report, setReport] = useState<AIReport | null>(null)\n  const [error, setError] = useState<string | null>(null)\n\n  const canGenerateReport = \n    assessment.status === 'SCORED' && \n    assessment.findings.length > 0\n\n  // Carregar planos salvos ao montar o componente\n  useEffect(() => {\n    async function loadSavedPlans() {\n      try {\n        const { getActionPlans } = await import('@/app/actions/action-plans')\n        const result = await getActionPlans(assessment.id)\n        \n        if ('error' in result) {\n          console.error('Erro ao carregar planos:', result.error)\n          return\n        }\n\n        if (result.actionPlans && result.actionPlans.length > 0) {\n          // Reconstituir o report a partir dos planos salvos\n          setReport({\n            executiveSummary: result.executiveSummary || '',\n            actionPlan: result.actionPlans.map(plan => ({\n              title: plan.title,\n              description: plan.description,\n              priority: plan.priority as 'HIGH' | 'MEDIUM' | 'LOW',\n              estimatedDays: plan.dueDate \n                ? Math.ceil((new Date(plan.dueDate).getTime() - Date.now()) / (24 * 60 * 60 * 1000))\n                : 30,\n              reference: plan.reference\n            })),\n            metadata: {\n              assessmentId: assessment.id,\n              companyName: '',\n              overallScore: null,\n              overallLevel: null,\n              findingsCount: assessment.findings.length,\n              generatedAt: new Date().toISOString()\n            }\n          })\n        }\n      } catch (err) {\n        console.error('Erro ao carregar planos salvos:', err)\n      } finally {\n        setLoading(false)\n      }\n    }\n\n    loadSavedPlans()\n  }, [assessment.id, assessment.findings.length])\n\n  const handleGenerateReport = async () => {\n    setGenerating(true)\n    setError(null)\n\n    try {\n      const response = await fetch('/api/ai/report-writer', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ assessmentId: assessment.id })\n      })\n\n      const data = await response.json()\n\n      if (!response.ok || data.error) {\n        throw new Error(data.error || 'Erro ao gerar relat√≥rio')\n      }\n\n      setReport(data.report)\n    } catch (err) {\n      console.error('Erro:', err)\n      setError(err instanceof Error ? err.message : 'Erro ao gerar relat√≥rio via IA')\n    } finally {\n      setGenerating(false)\n    }\n  }\n\n  const handleSaveActionPlan = async () => {\n    if (!report) return\n\n    setSaving(true)\n    setError(null)\n\n    try {\n      const { saveActionPlans } = await import('@/app/actions/action-plans')\n      \n      const result = await saveActionPlans(\n        assessment.id,\n        report.executiveSummary,\n        report.actionPlan\n      )\n\n      if ('error' in result) {\n        throw new Error(result.error)\n      }\n\n      alert(`${result.count} a√ß√µes salvas com sucesso no banco de dados!`)\n    } catch (err) {\n      console.error('Erro:', err)\n      setError(err instanceof Error ? err.message : 'Erro ao salvar plano de a√ß√£o')\n    } finally {\n      setSaving(false)\n    }\n  }\n\n  if (assessment.status !== 'SCORED') {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center space-y-3\">\n            <AlertCircle className=\"h-12 w-12 text-gray-400 mx-auto\" />\n            <h3 className=\"text-base font-semibold text-gray-900\">\n              Diagn√≥stico n√£o finalizado\n            </h3>\n            <p className=\"text-sm text-muted-foreground max-w-md mx-auto\">\n              Finalize o diagn√≥stico e responda todas as perguntas para gerar o plano de a√ß√£o.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (assessment.findings.length === 0) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center space-y-3\">\n            <CheckCircle2 className=\"h-12 w-12 text-green-600 mx-auto\" />\n            <h3 className=\"text-base font-semibold text-gray-900\">\n              Nenhuma a√ß√£o necess√°ria\n            </h3>\n            <p className=\"text-sm text-muted-foreground max-w-md mx-auto\">\n              O diagn√≥stico n√£o identificou achados que requerem a√ß√µes corretivas.\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (loading) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center\">\n            <Loader2 className=\"h-8 w-8 animate-spin text-gray-400 mx-auto\" />\n            <p className=\"text-sm text-gray-600 mt-3\">Carregando plano de a√ß√£o...</p>\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  if (!report) {\n    return (\n      <Card>\n        <CardContent className=\"py-12\">\n          <div className=\"text-center space-y-4\">\n            <Sparkles className=\"h-12 w-12 text-teal-600 mx-auto\" />\n            <div>\n              <h3 className=\"text-base font-semibold text-gray-900\">\n                Gerar Plano de A√ß√£o com IA\n              </h3>\n              <p className=\"text-sm text-muted-foreground mt-2 max-w-md mx-auto\">\n                Nossa IA analisar√° os {assessment.findings.length} achados identificados e gerar√° um \n                plano de a√ß√£o priorizado com recomenda√ß√µes espec√≠ficas.\n              </p>\n            </div>\n            <Button\n              onClick={handleGenerateReport}\n              disabled={generating || !canGenerateReport}\n              className=\"bg-teal-600 hover:bg-teal-700\"\n            >\n              {generating ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Gerando plano de a√ß√£o...\n                </>\n              ) : (\n                <>\n                  <Sparkles className=\"mr-2 h-4 w-4\" />\n                  Gerar Plano de A√ß√£o com IA\n                </>\n              )}\n            </Button>\n            {error && (\n              <p className=\"text-sm text-red-600 mt-2\">{error}</p>\n            )}\n          </div>\n        </CardContent>\n      </Card>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"border-teal-200 bg-teal-50\">\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-base text-teal-900\">\n              ‚úì Plano de A√ß√£o Gerado pela IA\n            </CardTitle>\n            <div className=\"flex gap-2\">\n              <Button\n                size=\"sm\"\n                variant=\"outline\"\n                onClick={() => setReport(null)}\n                disabled={saving}\n              >\n                Gerar Novamente\n              </Button>\n              <Button\n                size=\"sm\"\n                onClick={handleSaveActionPlan}\n                disabled={saving}\n                className=\"bg-teal-600 hover:bg-teal-700\"\n              >\n                {saving ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-3 w-3 animate-spin\" />\n                    Salvando...\n                  </>\n                ) : (\n                  <>\n                    <Save className=\"mr-2 h-3 w-3\" />\n                    Salvar Plano\n                  </>\n                )}\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"text-sm text-teal-800\">\n            <strong>{report.actionPlan.length} a√ß√µes</strong> recomendadas pela IA\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-base\">Resumo Executivo</CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"prose prose-sm max-w-none\">\n            <p className=\"text-sm text-gray-700 whitespace-pre-line\">\n              {report.executiveSummary}\n            </p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"space-y-4\">\n        <h3 className=\"text-base font-semibold text-gray-900\">\n          A√ß√µes Recomendadas ({report.actionPlan.length})\n        </h3>\n        \n        {report.actionPlan.map((action, idx) => {\n          const config = priorityConfig[action.priority]\n          \n          return (\n            <Card key={idx} className=\"hover:shadow-md transition-shadow\">\n              <CardHeader>\n                <div className=\"flex items-start justify-between gap-4\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <span className=\"text-sm font-medium text-gray-500\">\n                        #{idx + 1}\n                      </span>\n                      <Badge className={config.className}>\n                        Prioridade: {config.label}\n                      </Badge>\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {action.estimatedDays} dias\n                      </Badge>\n                    </div>\n                    <CardTitle className=\"text-base text-gray-900\">\n                      {action.title}\n                    </CardTitle>\n                  </div>\n                </div>\n              </CardHeader>\n              <CardContent className=\"space-y-3\">\n                <p className=\"text-sm text-gray-700\">\n                  {action.description}\n                </p>\n                {action.reference && (\n                  <div className=\"flex items-center gap-2 text-xs text-gray-600 bg-gray-50 p-2 rounded\">\n                    <span className=\"font-medium\">Refer√™ncia:</span>\n                    <span>{action.reference}</span>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          )\n        })}\n      </div>\n\n      {error && (\n        <div className=\"rounded-md bg-red-50 p-4 border border-red-200\">\n          <p className=\"text-sm text-red-800\">{error}</p>\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2486, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-evidence.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { FileText, Image, Upload, Trash2, Eye } from 'lucide-react'\n\ninterface DiagnosticEvidenceProps {\n  assessment: any\n}\n\nexport function DiagnosticEvidence({ assessment }: DiagnosticEvidenceProps) {\n  // Mock evidence data\n  const evidences = [\n    {\n      id: '1',\n      fileName: 'ata_reuniao.pdf',\n      fileSize: '1.2 MB',\n      type: 'application/pdf',\n      uploadedBy: 'Mariana Costa',\n      uploadedAt: '10/05/2024',\n    },\n    {\n      id: '2',\n      fileName: 'politica_sst.pdf',\n      fileSize: '800 KB',\n      type: 'application/pdf',\n      uploadedBy: 'Mariana Costa',\n      uploadedAt: '11/05/2024',\n    },\n    {\n      id: '3',\n      fileName: 'foto_extintor.jpg',\n      fileSize: '2.5 MB',\n      type: 'image/jpeg',\n      uploadedBy: 'Carlos Silva',\n      uploadedAt: '12/05/2024',\n    },\n  ]\n\n  const getFileIcon = (type: string) => {\n    if (type.startsWith('image/')) {\n      return <Image className=\"h-10 w-10 text-blue-500\" />\n    }\n    return <FileText className=\"h-10 w-10 text-red-500\" />\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <CardTitle>Galeria de Evid√™ncias</CardTitle>\n              <p className=\"text-sm text-muted-foreground mt-1\">\n                Todos os arquivos anexados √†s respostas e achados.\n              </p>\n            </div>\n            <Button className=\"gap-2\">\n              <Upload className=\"h-4 w-4\" />\n              Adicionar Evid√™ncia\n            </Button>\n          </div>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {evidences.map((evidence) => (\n              <Card key={evidence.id} className=\"hover:shadow-md transition-shadow\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex flex-col items-center text-center space-y-3\">\n                    {getFileIcon(evidence.type)}\n                    <div className=\"flex-1 min-w-0 w-full\">\n                      <h4 className=\"font-medium text-sm truncate\">{evidence.fileName}</h4>\n                      <p className=\"text-xs text-muted-foreground\">{evidence.fileSize}</p>\n                      <p className=\"text-xs text-muted-foreground mt-1\">\n                        Anexado em {evidence.uploadedAt} por {evidence.uploadedBy}\n                      </p>\n                    </div>\n                    <div className=\"flex gap-2 w-full\">\n                      <Button variant=\"outline\" size=\"sm\" className=\"flex-1 gap-1\">\n                        <Eye className=\"h-3 w-3\" />\n                        Ver\n                      </Button>\n                      <Button variant=\"outline\" size=\"sm\" className=\"text-destructive hover:text-destructive\">\n                        <Trash2 className=\"h-3 w-3\" />\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAJA;;;;;AAUO,SAAS,mBAAmB,EAAE,UAAU,EAA2B;IACxE,qBAAqB;IACrB,MAAM,YAAY;QAChB;YACE,IAAI;YACJ,UAAU;YACV,UAAU;YACV,MAAM;YACN,YAAY;YACZ,YAAY;QACd;QACA;YACE,IAAI;YACJ,UAAU;YACV,UAAU;YACV,MAAM;YACN,YAAY;YACZ,YAAY;QACd;QACA;YACE,IAAI;YACJ,UAAU;YACV,UAAU;YACV,MAAM;YACN,YAAY;YACZ,YAAY;QACd;KACD;IAED,MAAM,cAAc,CAAC;QACnB,IAAI,KAAK,UAAU,CAAC,WAAW;YAC7B,qBAAO,8OAAC,6MAAK;gBAAC,WAAU;;;;;;QAC1B;QACA,qBAAO,8OAAC,0NAAQ;YAAC,WAAU;;;;;;IAC7B;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iIAAI;;8BACH,8OAAC,uIAAU;8BACT,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;;kDACC,8OAAC,sIAAS;kDAAC;;;;;;kDACX,8OAAC;wCAAE,WAAU;kDAAqC;;;;;;;;;;;;0CAIpD,8OAAC,qIAAM;gCAAC,WAAU;;kDAChB,8OAAC,gNAAM;wCAAC,WAAU;;;;;;oCAAY;;;;;;;;;;;;;;;;;;8BAKpC,8OAAC,wIAAW;8BACV,cAAA,8OAAC;wBAAI,WAAU;kCACZ,UAAU,GAAG,CAAC,CAAC,yBACd,8OAAC,iIAAI;gCAAmB,WAAU;0CAChC,cAAA,8OAAC,wIAAW;oCAAC,WAAU;8CACrB,cAAA,8OAAC;wCAAI,WAAU;;4CACZ,YAAY,SAAS,IAAI;0DAC1B,8OAAC;gDAAI,WAAU;;kEACb,8OAAC;wDAAG,WAAU;kEAAgC,SAAS,QAAQ;;;;;;kEAC/D,8OAAC;wDAAE,WAAU;kEAAiC,SAAS,QAAQ;;;;;;kEAC/D,8OAAC;wDAAE,WAAU;;4DAAqC;4DACpC,SAAS,UAAU;4DAAC;4DAAM,SAAS,UAAU;;;;;;;;;;;;;0DAG7D,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,qIAAM;wDAAC,SAAQ;wDAAU,MAAK;wDAAK,WAAU;;0EAC5C,8OAAC,uMAAG;gEAAC,WAAU;;;;;;4DAAY;;;;;;;kEAG7B,8OAAC,qIAAM;wDAAC,SAAQ;wDAAU,MAAK;wDAAK,WAAU;kEAC5C,cAAA,8OAAC,oNAAM;4DAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;+BAjBjB,SAAS,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BpC","debugId":null}},
    {"offset": {"line": 2743, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-audit.tsx"],"sourcesContent":["'use client'\n\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\n\ninterface DiagnosticAuditProps {\n  assessment: any\n}\n\nexport function DiagnosticAudit({ assessment }: DiagnosticAuditProps) {\n  // Mock audit log data\n  const auditLogs = [\n    {\n      id: '1',\n      user: 'Ana Beatriz',\n      action: 'Criou o diagn√≥stico',\n      details: 'Diagn√≥stico Anual de Maturidade SST 2024',\n      timestamp: '01/05/2024 09:00',\n    },\n    {\n      id: '2',\n      user: 'Carlos Silva',\n      action: 'Respondeu √† pergunta',\n      details: 'Se√ß√£o: Governan√ßa, Pergunta: q1-1, Resposta: 4',\n      timestamp: '10/05/2024 14:20',\n    },\n    {\n      id: '3',\n      user: 'Mariana Costa',\n      action: 'Adicionou evid√™ncia',\n      details: 'Pergunta: q1-1, Arquivo: ata_reuniao.pdf',\n      timestamp: '10/05/2024 14:22',\n    },\n    {\n      id: '4',\n      user: 'IA (Sistema)',\n      action: 'Gerou achado (NC)',\n      details: 'Achado find-3 gerado para pergunta q5-1.',\n      timestamp: '12/05/2024 11:05',\n    },\n    {\n      id: '5',\n      user: 'Jo√£o Pereira',\n      action: 'Gerou plano de a√ß√£o com IA',\n      details: 'Plano de a√ß√£o para 3 achados.',\n      timestamp: '15/05/2024 10:00',\n    },\n    {\n      id: '6',\n      user: 'Jo√£o Pereira',\n      action: 'Aprovou tarefa do plano',\n      details: 'Tarefa: Agendar treinamento da brigada.',\n      timestamp: '15/05/2024 10:05',\n    },\n  ]\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Log de Auditoria</CardTitle>\n          <p className=\"text-sm text-muted-foreground\">\n            Hist√≥rico de todas as a√ß√µes realizadas neste diagn√≥stico.\n          </p>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            <table className=\"w-full\">\n              <thead className=\"bg-muted/50\">\n                <tr>\n                  <th className=\"text-left p-3 text-sm font-medium\">Usu√°rio</th>\n                  <th className=\"text-left p-3 text-sm font-medium\">A√ß√£o</th>\n                  <th className=\"text-left p-3 text-sm font-medium\">Detalhes</th>\n                  <th className=\"text-right p-3 text-sm font-medium\">Data</th>\n                </tr>\n              </thead>\n              <tbody>\n                {auditLogs.map((log) => (\n                  <tr key={log.id} className=\"border-b border-border hover:bg-muted/30\">\n                    <td className=\"p-3 text-sm font-medium\">{log.user}</td>\n                    <td className=\"p-3 text-sm\">{log.action}</td>\n                    <td className=\"p-3 text-sm text-muted-foreground\">{log.details}</td>\n                    <td className=\"p-3 text-sm text-right text-muted-foreground\">{log.timestamp}</td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAQO,SAAS,gBAAgB,EAAE,UAAU,EAAwB;IAClE,sBAAsB;IACtB,MAAM,YAAY;QAChB;YACE,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,SAAS;YACT,WAAW;QACb;QACA;YACE,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,SAAS;YACT,WAAW;QACb;QACA;YACE,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,SAAS;YACT,WAAW;QACb;QACA;YACE,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,SAAS;YACT,WAAW;QACb;QACA;YACE,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,SAAS;YACT,WAAW;QACb;QACA;YACE,IAAI;YACJ,MAAM;YACN,QAAQ;YACR,SAAS;YACT,WAAW;QACb;KACD;IAED,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC,iIAAI;;8BACH,8OAAC,uIAAU;;sCACT,8OAAC,sIAAS;sCAAC;;;;;;sCACX,8OAAC;4BAAE,WAAU;sCAAgC;;;;;;;;;;;;8BAI/C,8OAAC,wIAAW;8BACV,cAAA,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAM,WAAU;;8CACf,8OAAC;oCAAM,WAAU;8CACf,cAAA,8OAAC;;0DACC,8OAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAClD,8OAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAClD,8OAAC;gDAAG,WAAU;0DAAoC;;;;;;0DAClD,8OAAC;gDAAG,WAAU;0DAAqC;;;;;;;;;;;;;;;;;8CAGvD,8OAAC;8CACE,UAAU,GAAG,CAAC,CAAC,oBACd,8OAAC;4CAAgB,WAAU;;8DACzB,8OAAC;oDAAG,WAAU;8DAA2B,IAAI,IAAI;;;;;;8DACjD,8OAAC;oDAAG,WAAU;8DAAe,IAAI,MAAM;;;;;;8DACvC,8OAAC;oDAAG,WAAU;8DAAqC,IAAI,OAAO;;;;;;8DAC9D,8OAAC;oDAAG,WAAU;8DAAgD,IAAI,SAAS;;;;;;;2CAJpE,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAcjC","debugId":null}},
    {"offset": {"line": 2957, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/components/dashboard/diagnostic-tabs.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Badge } from '@/components/ui/badge'\nimport { Calendar, User, Tag, Clock } from 'lucide-react'\nimport { DiagnosticResume } from './diagnostic-resume'\nimport { DiagnosticSections } from './diagnostic-sections'\nimport { DiagnosticFindings } from './diagnostic-findings'\nimport { DiagnosticActionPlan } from './diagnostic-action-plan'\nimport { DiagnosticEvidence } from './diagnostic-evidence'\nimport { DiagnosticAudit } from './diagnostic-audit'\n\ninterface DiagnosticTabsProps {\n  assessment: any\n}\n\nconst tabs = [\n  { id: 'resumo', label: 'Resumo' },\n  { id: 'sections', label: 'Se√ß√µes & Perguntas' },\n  { id: 'achados', label: 'Achados' },\n  { id: 'plano', label: 'Plano de A√ß√£o' },\n  { id: 'evidencias', label: 'Evid√™ncias' },\n  { id: 'auditoria', label: 'Auditoria' },\n]\n\nconst statusConfig: Record<string, { label: string; className: string }> = {\n  DRAFT: { label: 'Rascunho', className: 'bg-gray-100 text-gray-800' },\n  IN_PROGRESS: { label: 'Em andamento', className: 'bg-blue-100 text-blue-800' },\n  SUBMITTED: { label: 'Submetido', className: 'bg-yellow-100 text-yellow-800' },\n  SCORED: { label: 'Pontuado', className: 'bg-purple-100 text-purple-800' },\n  COMPLETED: { label: 'Conclu√≠do', className: 'bg-green-100 text-green-800' },\n}\n\nexport function DiagnosticTabs({ assessment }: DiagnosticTabsProps) {\n  const [activeTab, setActiveTab] = useState('resumo')\n  \n  const status = statusConfig[assessment.status] || statusConfig.DRAFT\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Tabs Navigation */}\n      <div className=\"border-b border-border\">\n        <div className=\"flex space-x-8\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.id}\n              onClick={() => setActiveTab(tab.id)}\n              className={`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${\n                activeTab === tab.id\n                  ? 'border-primary text-primary'\n                  : 'border-transparent text-muted-foreground hover:text-primary hover:border-muted-foreground'\n              }`}\n            >\n              {tab.label}\n            </button>\n          ))}\n        </div>\n      </div>\n\n      {/* Info Card */}\n      {activeTab === 'resumo' && (\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-6\">\n              <div className=\"flex items-center gap-3\">\n                <User className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Autor</p>\n                  <p className=\"font-medium\">user-xyz</p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <Calendar className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Criado em</p>\n                  <p className=\"font-medium\">\n                    {new Date(assessment.createdAt).toLocaleDateString('pt-BR')}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <Clock className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Atualizado em</p>\n                  <p className=\"font-medium\">\n                    {new Date(assessment.updatedAt).toLocaleDateString('pt-BR')}\n                  </p>\n                </div>\n              </div>\n              \n              <div className=\"flex items-center gap-3\">\n                <Tag className=\"h-5 w-5 text-muted-foreground\" />\n                <div>\n                  <p className=\"text-sm text-muted-foreground\">Status</p>\n                  <Badge className={status.className}>{status.label}</Badge>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Tab Content */}\n      <div className=\"min-h-[400px]\">\n        {activeTab === 'resumo' && <DiagnosticResume assessment={assessment} />}\n        {activeTab === 'sections' && <DiagnosticSections assessment={assessment} />}\n        {activeTab === 'achados' && <DiagnosticFindings assessment={assessment} />}\n        {activeTab === 'plano' && <DiagnosticActionPlan assessment={assessment} />}\n        {activeTab === 'evidencias' && <DiagnosticEvidence assessment={assessment} />}\n        {activeTab === 'auditoria' && <DiagnosticAudit assessment={assessment} />}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;;;;;;;;;;;;AAiBA,MAAM,OAAO;IACX;QAAE,IAAI;QAAU,OAAO;IAAS;IAChC;QAAE,IAAI;QAAY,OAAO;IAAqB;IAC9C;QAAE,IAAI;QAAW,OAAO;IAAU;IAClC;QAAE,IAAI;QAAS,OAAO;IAAgB;IACtC;QAAE,IAAI;QAAc,OAAO;IAAa;IACxC;QAAE,IAAI;QAAa,OAAO;IAAY;CACvC;AAED,MAAM,eAAqE;IACzE,OAAO;QAAE,OAAO;QAAY,WAAW;IAA4B;IACnE,aAAa;QAAE,OAAO;QAAgB,WAAW;IAA4B;IAC7E,WAAW;QAAE,OAAO;QAAa,WAAW;IAAgC;IAC5E,QAAQ;QAAE,OAAO;QAAY,WAAW;IAAgC;IACxE,WAAW;QAAE,OAAO;QAAa,WAAW;IAA8B;AAC5E;AAEO,SAAS,eAAe,EAAE,UAAU,EAAuB;IAChE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAE3C,MAAM,SAAS,YAAY,CAAC,WAAW,MAAM,CAAC,IAAI,aAAa,KAAK;IAEpE,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACZ,KAAK,GAAG,CAAC,CAAC,oBACT,8OAAC;4BAEC,SAAS,IAAM,aAAa,IAAI,EAAE;4BAClC,WAAW,CAAC,2DAA2D,EACrE,cAAc,IAAI,EAAE,GAChB,gCACA,6FACJ;sCAED,IAAI,KAAK;2BARL,IAAI,EAAE;;;;;;;;;;;;;;;YAelB,cAAc,0BACb,8OAAC,iIAAI;0BACH,cAAA,8OAAC,wIAAW;oBAAC,WAAU;8BACrB,cAAA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,0MAAI;wCAAC,WAAU;;;;;;kDAChB,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAAgC;;;;;;0DAC7C,8OAAC;gDAAE,WAAU;0DAAc;;;;;;;;;;;;;;;;;;0CAI/B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,sNAAQ;wCAAC,WAAU;;;;;;kDACpB,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAAgC;;;;;;0DAC7C,8OAAC;gDAAE,WAAU;0DACV,IAAI,KAAK,WAAW,SAAS,EAAE,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;0CAKzD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,6MAAK;wCAAC,WAAU;;;;;;kDACjB,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAAgC;;;;;;0DAC7C,8OAAC;gDAAE,WAAU;0DACV,IAAI,KAAK,WAAW,SAAS,EAAE,kBAAkB,CAAC;;;;;;;;;;;;;;;;;;0CAKzD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,uMAAG;wCAAC,WAAU;;;;;;kDACf,8OAAC;;0DACC,8OAAC;gDAAE,WAAU;0DAAgC;;;;;;0DAC7C,8OAAC,mIAAK;gDAAC,WAAW,OAAO,SAAS;0DAAG,OAAO,KAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAS7D,8OAAC;gBAAI,WAAU;;oBACZ,cAAc,0BAAY,8OAAC,oKAAgB;wBAAC,YAAY;;;;;;oBACxD,cAAc,4BAAc,8OAAC,wKAAkB;wBAAC,YAAY;;;;;;oBAC5D,cAAc,2BAAa,8OAAC,wKAAkB;wBAAC,YAAY;;;;;;oBAC3D,cAAc,yBAAW,8OAAC,gLAAoB;wBAAC,YAAY;;;;;;oBAC3D,cAAc,8BAAgB,8OAAC,wKAAkB;wBAAC,YAAY;;;;;;oBAC9D,cAAc,6BAAe,8OAAC,kKAAe;wBAAC,YAAY;;;;;;;;;;;;;;;;;;AAInE","debugId":null}}]
}